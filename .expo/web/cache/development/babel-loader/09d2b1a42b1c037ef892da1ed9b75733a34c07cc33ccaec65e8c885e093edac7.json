{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React from \"react\";\nimport { useContextKey } from \"../Route\";\nimport { useSortedScreens } from \"../useScreens\";\nimport { Screen } from \"../views/Screen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function useFilterScreenChildren(children) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    isCustomNavigator = _ref.isCustomNavigator,\n    contextKey = _ref.contextKey;\n  return React.useMemo(function () {\n    var customChildren = [];\n    var screens = React.Children.map(children, function (child) {\n      if (React.isValidElement(child) && child && child.type === Screen) {\n        if (!child.props.name) {\n          throw new Error(`<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must have a \\`name\\` prop when used as a child of a Layout Route.`);\n        }\n        if (process.env.NODE_ENV !== \"production\") {\n          if ([\"children\", \"component\", \"getComponent\"].some(function (key) {\n            return key in child.props;\n          })) {\n            throw new Error(`<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must not have a \\`children\\`, \\`component\\`, or \\`getComponent\\` prop when used as a child of a Layout Route`);\n          }\n        }\n        return child.props;\n      } else {\n        if (isCustomNavigator) {\n          customChildren.push(child);\n        } else {\n          console.warn(`Layout children must be of type Screen, all other children are ignored. To use custom children, create a custom <Layout />. Update Layout Route at: \"app${contextKey}/_layout\"`);\n        }\n      }\n    });\n    if (process.env.NODE_ENV !== \"production\") {\n      var names = screens == null ? void 0 : screens.map(function (screen) {\n        return screen.name;\n      });\n      if (names && new Set(names).size !== names.length) {\n        throw new Error(\"Screen names must be unique: \" + names);\n      }\n    }\n    return {\n      screens: screens,\n      children: customChildren\n    };\n  }, [children]);\n}\nexport function withLayoutContext(Nav, processor) {\n  var Navigator = React.forwardRef(function (_ref2, ref) {\n    var userDefinedChildren = _ref2.children,\n      props = _objectWithoutProperties(_ref2, _excluded);\n    var contextKey = useContextKey();\n    var _useFilterScreenChild = useFilterScreenChildren(userDefinedChildren, {\n        contextKey: contextKey\n      }),\n      screens = _useFilterScreenChild.screens;\n    var processed = processor ? processor(screens != null ? screens : []) : screens;\n    var sorted = useSortedScreens(processed != null ? processed : []);\n    if (!sorted.length) {\n      return null;\n    }\n    return _jsx(Nav, _objectSpread(_objectSpread({}, props), {}, {\n      id: contextKey,\n      ref: ref,\n      children: sorted\n    }));\n  });\n  Navigator.Screen = Screen;\n  return Navigator;\n}","map":{"version":3,"names":["React","useContextKey","useSortedScreens","Screen","jsx","_jsx","useFilterScreenChildren","children","_ref","arguments","length","undefined","isCustomNavigator","contextKey","useMemo","customChildren","screens","Children","map","child","isValidElement","type","props","name","Error","process","env","NODE_ENV","some","key","push","console","warn","names","screen","Set","size","withLayoutContext","Nav","processor","Navigator","forwardRef","_ref2","ref","userDefinedChildren","_objectWithoutProperties","_excluded","_useFilterScreenChild","processed","sorted","_objectSpread","id"],"sources":["C:/Users/Bartek/react_native_boi/node_modules/expo-router/src/layouts/withLayoutContext.tsx"],"sourcesContent":["import { EventMapBase, NavigationState } from \"@react-navigation/native\";\nimport React from \"react\";\n\nimport { useContextKey } from \"../Route\";\nimport { PickPartial } from \"../types\";\nimport { useSortedScreens, ScreenProps } from \"../useScreens\";\nimport { Screen } from \"../views/Screen\";\n\nexport function useFilterScreenChildren(\n  children: React.ReactNode,\n  {\n    isCustomNavigator,\n    contextKey,\n  }: {\n    isCustomNavigator?: boolean;\n    /** Used for sending developer hints */\n    contextKey?: string;\n  } = {}\n) {\n  return React.useMemo(() => {\n    const customChildren: any[] = [];\n    const screens = React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && child && child.type === Screen) {\n        if (!child.props.name) {\n          throw new Error(\n            `<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must have a \\`name\\` prop when used as a child of a Layout Route.`\n          );\n        }\n        if (process.env.NODE_ENV !== \"production\") {\n          if (\n            [\"children\", \"component\", \"getComponent\"].some(\n              (key) => key in child.props\n            )\n          ) {\n            throw new Error(\n              `<Screen /> component in \\`default export\\` at \\`app${contextKey}/_layout\\` must not have a \\`children\\`, \\`component\\`, or \\`getComponent\\` prop when used as a child of a Layout Route`\n            );\n          }\n        }\n        return child.props;\n      } else {\n        if (isCustomNavigator) {\n          customChildren.push(child);\n        } else {\n          console.warn(\n            `Layout children must be of type Screen, all other children are ignored. To use custom children, create a custom <Layout />. Update Layout Route at: \"app${contextKey}/_layout\"`\n          );\n        }\n      }\n    });\n\n    // Add an assertion for development\n    if (process.env.NODE_ENV !== \"production\") {\n      // Assert if names are not unique\n      const names = screens?.map((screen) => screen.name);\n      if (names && new Set(names).size !== names.length) {\n        throw new Error(\"Screen names must be unique: \" + names);\n      }\n    }\n\n    return {\n      screens,\n      children: customChildren,\n    };\n  }, [children]);\n}\n\n/** Return a navigator that automatically injects matched routes and renders nothing when there are no children. Return type with children prop optional */\nexport function withLayoutContext<\n  TOptions extends object,\n  T extends React.ComponentType<any>,\n  State extends NavigationState,\n  EventMap extends EventMapBase\n>(\n  Nav: T,\n  processor?: (\n    options: ScreenProps<TOptions, State, EventMap>[]\n  ) => ScreenProps<TOptions, State, EventMap>[]\n): React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<PickPartial<React.ComponentProps<T>, \"children\">> &\n    React.RefAttributes<unknown>\n> & {\n  Screen: (props: ScreenProps<TOptions, State, EventMap>) => null;\n} {\n  const Navigator = React.forwardRef(\n    (\n      {\n        children: userDefinedChildren,\n        ...props\n      }: PickPartial<React.ComponentProps<T>, \"children\">,\n      ref\n    ) => {\n      const contextKey = useContextKey();\n\n      const { screens } = useFilterScreenChildren(userDefinedChildren, {\n        contextKey,\n      });\n\n      const processed = processor ? processor(screens ?? []) : screens;\n\n      const sorted = useSortedScreens(processed ?? []);\n\n      // Prevent throwing an error when there are no screens.\n      if (!sorted.length) {\n        return null;\n      }\n\n      return (\n        // @ts-expect-error\n        <Nav {...props} id={contextKey} ref={ref} children={sorted} />\n      );\n    }\n  );\n\n  // @ts-expect-error\n  Navigator.Screen = Screen;\n  // @ts-expect-error\n  return Navigator;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}